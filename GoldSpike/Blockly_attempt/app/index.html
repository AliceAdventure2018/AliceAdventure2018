<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Canvas Test</title>
    <script type="text/javascript" src="blockly/blockly_compressed.js" src = "blockly/blocks_compressed.js" src = "blockly/mag/js/en.js"> </script>
    <style>
          html, body {
            height: 100%;
            margin: 0;
          }
          body {
            background-color: #fff;
            font-family: sans-serif;
            overflow: hidden;
          }
          h1 {
            font-weight: normal;
            font-size: 140%;
          }
          table {
            height: 100%;
            width: 100%;
          }
          #blocklyArea {
            height: 99%;
          }
      </style>
  </head>
  <body>
    <table>
      <tbody>
        <tr>
            <h1>This is the test for Electron and Blockly</h1>
        </tr>
        <tr>
          <td id = "blocklyArea"></td>
        </tr>
      </tbody>
    </table>

    <div id="blocklyDiv" style="position: absolute;left:2px; top: 151px;width: 513px;height: 418px;"></div>
    <xml id = "toolbox" style = "display: none">
      <category name = "Control" colour= "120">
        
      </category>
      <category name ="Logic" colour = "0">
        <block type = "logic_compare"></block>
        <block type = "logic_operation"></block>
      </category>

      <category name = "Variables" colour = "210" custom = "VARIABLE"></category>
      <category name = "Functions" colour = "290" custom = "PROCEDURE"></category>
    </xml>

  </body>

<script>
  
    var blocklyArea = document.getElementById('blocklyArea');
    var blocklyDiv = document.getElementById('blocklyDiv');
    var demoWorkspace = Blockly.inject(blocklyDiv,
        {media: '../../media/',
         toolbox: document.getElementById('toolbox')});
    var onresize = function(e) {
      // Compute the absolute coordinates and dimensions of blocklyArea.
      var element = blocklyArea;
      var x = 0;
      var y = 0;
      do {
        x += element.offsetLeft;
        y += element.offsetTop;
        element = element.offsetParent;
      } while (element);
      // Position blocklyDiv over blocklyArea.
      blocklyDiv.style.left = x + 'px';
      blocklyDiv.style.top = y + 'px';
      blocklyDiv.style.width = blocklyArea.offsetWidth + 'px';
      blocklyDiv.style.height = blocklyArea.offsetHeight + 'px';
    };
    window.addEventListener('resize', onresize, false);
    onresize();
    Blockly.svgResize(demoWorkspace);
  
</script>
</html>
